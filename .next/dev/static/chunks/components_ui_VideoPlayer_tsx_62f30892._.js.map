{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/slcrvaranasi/components/ui/VideoPlayer.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport Hls from 'hls.js';\r\nimport { Play, Pause, Volume2, VolumeX, Maximize } from 'lucide-react';\r\n\r\ninterface VideoPlayerProps {\r\n    src: string;\r\n    poster?: string;\r\n    title?: string;\r\n}\r\n\r\nexport default function VideoPlayer({ src, poster, title }: VideoPlayerProps) {\r\n    const videoRef = useRef<HTMLVideoElement>(null);\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [isMuted, setIsMuted] = useState(true);\r\n    const [progress, setProgress] = useState(0);\r\n    const [showControls, setShowControls] = useState(true);\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const video = videoRef.current;\r\n        if (!video) return;\r\n\r\n        let hls: Hls | null = null;\r\n\r\n        console.log('HLS Support:', Hls.isSupported());\r\n        console.log('Video src:', src);\r\n\r\n        if (Hls.isSupported()) {\r\n            hls = new Hls({\r\n                enableWorker: true,\r\n                lowLatencyMode: false,\r\n                debug: true,\r\n            });\r\n            hls.loadSource(src);\r\n            hls.attachMedia(video);\r\n\r\n            hls.on(Hls.Events.MANIFEST_PARSED, () => {\r\n                console.log('HLS Manifest parsed - video ready');\r\n                setIsLoaded(true);\r\n            });\r\n\r\n            hls.on(Hls.Events.ERROR, (event, data) => {\r\n                console.error('HLS Error:', data.type, data.details, data);\r\n            });\r\n        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {\r\n            // Safari native HLS support\r\n            video.src = src;\r\n            video.addEventListener('loadeddata', () => setIsLoaded(true));\r\n        }\r\n\r\n        return () => {\r\n            if (hls) {\r\n                hls.destroy();\r\n            }\r\n        };\r\n    }, [src]);\r\n\r\n    useEffect(() => {\r\n        const video = videoRef.current;\r\n        if (!video) return;\r\n\r\n        const handleTimeUpdate = () => {\r\n            const progress = (video.currentTime / video.duration) * 100;\r\n            setProgress(progress || 0);\r\n        };\r\n\r\n        const handleEnded = () => {\r\n            setIsPlaying(false);\r\n        };\r\n\r\n        video.addEventListener('timeupdate', handleTimeUpdate);\r\n        video.addEventListener('ended', handleEnded);\r\n\r\n        return () => {\r\n            video.removeEventListener('timeupdate', handleTimeUpdate);\r\n            video.removeEventListener('ended', handleEnded);\r\n        };\r\n    }, []);\r\n\r\n    const togglePlay = () => {\r\n        const video = videoRef.current;\r\n        if (!video) return;\r\n\r\n        if (isPlaying) {\r\n            video.pause();\r\n        } else {\r\n            video.play();\r\n        }\r\n        setIsPlaying(!isPlaying);\r\n    };\r\n\r\n    const toggleMute = () => {\r\n        const video = videoRef.current;\r\n        if (!video) return;\r\n\r\n        video.muted = !video.muted;\r\n        setIsMuted(!isMuted);\r\n    };\r\n\r\n    const toggleFullscreen = () => {\r\n        const container = containerRef.current;\r\n        if (!container) return;\r\n\r\n        if (document.fullscreenElement) {\r\n            document.exitFullscreen();\r\n        } else {\r\n            container.requestFullscreen();\r\n        }\r\n    };\r\n\r\n    const handleProgressClick = (e: React.MouseEvent<HTMLDivElement>) => {\r\n        const video = videoRef.current;\r\n        if (!video) return;\r\n\r\n        const rect = e.currentTarget.getBoundingClientRect();\r\n        const pos = (e.clientX - rect.left) / rect.width;\r\n        video.currentTime = pos * video.duration;\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            className=\"relative w-full aspect-video bg-black rounded-xl overflow-hidden shadow-2xl group\"\r\n            onMouseEnter={() => setShowControls(true)}\r\n            onMouseLeave={() => !isPlaying && setShowControls(true)}\r\n        >\r\n            <video\r\n                ref={videoRef}\r\n                poster={poster}\r\n                className=\"w-full h-full object-contain\"\r\n                muted={isMuted}\r\n                playsInline\r\n            />\r\n\r\n            {/* Play Overlay */}\r\n            {!isPlaying && (\r\n                <div\r\n                    className=\"absolute inset-0 flex items-center justify-center bg-black/40 cursor-pointer transition-opacity\"\r\n                    onClick={togglePlay}\r\n                >\r\n                    <div className=\"w-20 h-20 bg-white/90 rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-transform\">\r\n                        <Play className=\"w-10 h-10 text-primary ml-1\" fill=\"currentColor\" />\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Controls */}\r\n            <div\r\n                className={`absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent transition-opacity ${showControls || !isPlaying ? 'opacity-100' : 'opacity-0'\r\n                    }`}\r\n            >\r\n                {/* Progress Bar */}\r\n                <div\r\n                    className=\"w-full h-1.5 bg-white/30 rounded-full cursor-pointer mb-3\"\r\n                    onClick={handleProgressClick}\r\n                >\r\n                    <div\r\n                        className=\"h-full bg-accent rounded-full transition-all\"\r\n                        style={{ width: `${progress}%` }}\r\n                    />\r\n                </div>\r\n\r\n                {/* Control Buttons */}\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <button\r\n                            onClick={togglePlay}\r\n                            className=\"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors\"\r\n                        >\r\n                            {isPlaying ? (\r\n                                <Pause className=\"w-5 h-5 text-white\" />\r\n                            ) : (\r\n                                <Play className=\"w-5 h-5 text-white ml-0.5\" />\r\n                            )}\r\n                        </button>\r\n                        <button\r\n                            onClick={toggleMute}\r\n                            className=\"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors\"\r\n                        >\r\n                            {isMuted ? (\r\n                                <VolumeX className=\"w-5 h-5 text-white\" />\r\n                            ) : (\r\n                                <Volume2 className=\"w-5 h-5 text-white\" />\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n\r\n                    {title && (\r\n                        <span className=\"text-white text-sm font-medium hidden sm:block\">{title}</span>\r\n                    )}\r\n\r\n                    <button\r\n                        onClick={toggleFullscreen}\r\n                        className=\"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors\"\r\n                    >\r\n                        <Maximize className=\"w-5 h-5 text-white\" />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;;;AAJA;;;;AAYe,SAAS,YAAY,EAAE,GAAG,EAAE,MAAM,EAAE,KAAK,EAAoB;;IACxE,MAAM,WAAW,IAAA,uKAAM,EAAmB;IAC1C,MAAM,eAAe,IAAA,uKAAM,EAAiB;IAC5C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,IAAA,0KAAS;iCAAC;YACN,MAAM,QAAQ,SAAS,OAAO;YAC9B,IAAI,CAAC,OAAO;YAEZ,IAAI,MAAkB;YAEtB,QAAQ,GAAG,CAAC,gBAAgB,uJAAG,CAAC,WAAW;YAC3C,QAAQ,GAAG,CAAC,cAAc;YAE1B,IAAI,uJAAG,CAAC,WAAW,IAAI;gBACnB,MAAM,IAAI,uJAAG,CAAC;oBACV,cAAc;oBACd,gBAAgB;oBAChB,OAAO;gBACX;gBACA,IAAI,UAAU,CAAC;gBACf,IAAI,WAAW,CAAC;gBAEhB,IAAI,EAAE,CAAC,uJAAG,CAAC,MAAM,CAAC,eAAe;6CAAE;wBAC/B,QAAQ,GAAG,CAAC;wBACZ,YAAY;oBAChB;;gBAEA,IAAI,EAAE,CAAC,uJAAG,CAAC,MAAM,CAAC,KAAK;6CAAE,CAAC,OAAO;wBAC7B,QAAQ,KAAK,CAAC,cAAc,KAAK,IAAI,EAAE,KAAK,OAAO,EAAE;oBACzD;;YACJ,OAAO,IAAI,MAAM,WAAW,CAAC,kCAAkC;gBAC3D,4BAA4B;gBAC5B,MAAM,GAAG,GAAG;gBACZ,MAAM,gBAAgB,CAAC;6CAAc,IAAM,YAAY;;YAC3D;YAEA;yCAAO;oBACH,IAAI,KAAK;wBACL,IAAI,OAAO;oBACf;gBACJ;;QACJ;gCAAG;QAAC;KAAI;IAER,IAAA,0KAAS;iCAAC;YACN,MAAM,QAAQ,SAAS,OAAO;YAC9B,IAAI,CAAC,OAAO;YAEZ,MAAM;0DAAmB;oBACrB,MAAM,WAAW,AAAC,MAAM,WAAW,GAAG,MAAM,QAAQ,GAAI;oBACxD,YAAY,YAAY;gBAC5B;;YAEA,MAAM;qDAAc;oBAChB,aAAa;gBACjB;;YAEA,MAAM,gBAAgB,CAAC,cAAc;YACrC,MAAM,gBAAgB,CAAC,SAAS;YAEhC;yCAAO;oBACH,MAAM,mBAAmB,CAAC,cAAc;oBACxC,MAAM,mBAAmB,CAAC,SAAS;gBACvC;;QACJ;gCAAG,EAAE;IAEL,MAAM,aAAa;QACf,MAAM,QAAQ,SAAS,OAAO;QAC9B,IAAI,CAAC,OAAO;QAEZ,IAAI,WAAW;YACX,MAAM,KAAK;QACf,OAAO;YACH,MAAM,IAAI;QACd;QACA,aAAa,CAAC;IAClB;IAEA,MAAM,aAAa;QACf,MAAM,QAAQ,SAAS,OAAO;QAC9B,IAAI,CAAC,OAAO;QAEZ,MAAM,KAAK,GAAG,CAAC,MAAM,KAAK;QAC1B,WAAW,CAAC;IAChB;IAEA,MAAM,mBAAmB;QACrB,MAAM,YAAY,aAAa,OAAO;QACtC,IAAI,CAAC,WAAW;QAEhB,IAAI,SAAS,iBAAiB,EAAE;YAC5B,SAAS,cAAc;QAC3B,OAAO;YACH,UAAU,iBAAiB;QAC/B;IACJ;IAEA,MAAM,sBAAsB,CAAC;QACzB,MAAM,QAAQ,SAAS,OAAO;QAC9B,IAAI,CAAC,OAAO;QAEZ,MAAM,OAAO,EAAE,aAAa,CAAC,qBAAqB;QAClD,MAAM,MAAM,CAAC,EAAE,OAAO,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK;QAChD,MAAM,WAAW,GAAG,MAAM,MAAM,QAAQ;IAC5C;IAEA,qBACI,6LAAC;QACG,KAAK;QACL,WAAU;QACV,cAAc,IAAM,gBAAgB;QACpC,cAAc,IAAM,CAAC,aAAa,gBAAgB;;0BAElD,6LAAC;gBACG,KAAK;gBACL,QAAQ;gBACR,WAAU;gBACV,OAAO;gBACP,WAAW;;;;;;YAId,CAAC,2BACE,6LAAC;gBACG,WAAU;gBACV,SAAS;0BAET,cAAA,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC,6MAAI;wBAAC,WAAU;wBAA8B,MAAK;;;;;;;;;;;;;;;;0BAM/D,6LAAC;gBACG,WAAW,CAAC,sGAAsG,EAAE,gBAAgB,CAAC,YAAY,gBAAgB,aAC3J;;kCAGN,6LAAC;wBACG,WAAU;wBACV,SAAS;kCAET,cAAA,6LAAC;4BACG,WAAU;4BACV,OAAO;gCAAE,OAAO,GAAG,SAAS,CAAC,CAAC;4BAAC;;;;;;;;;;;kCAKvC,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCACG,SAAS;wCACT,WAAU;kDAET,0BACG,6LAAC,gNAAK;4CAAC,WAAU;;;;;iEAEjB,6LAAC,6MAAI;4CAAC,WAAU;;;;;;;;;;;kDAGxB,6LAAC;wCACG,SAAS;wCACT,WAAU;kDAET,wBACG,6LAAC,0NAAO;4CAAC,WAAU;;;;;iEAEnB,6LAAC,0NAAO;4CAAC,WAAU;;;;;;;;;;;;;;;;;4BAK9B,uBACG,6LAAC;gCAAK,WAAU;0CAAkD;;;;;;0CAGtE,6LAAC;gCACG,SAAS;gCACT,WAAU;0CAEV,cAAA,6LAAC,yNAAQ;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM5C;GAhMwB;KAAA"}}]
}